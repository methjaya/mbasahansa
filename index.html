<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBA Semester II Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base styles for the body and overall typography */
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s, color 0.3s; /* Smooth transition for theme change */
        }
        /* Chart container styling for responsiveness */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 320px;
            height: 320px;
            margin: auto;
        }
        /* Active and inactive tab styling for light mode */
        .tab-active {
            background-color: #3b82f6; /* blue-500 */
            color: white;
        }
        .tab-inactive {
            background-color: #e5e7eb; /* gray-200 */
            color: #374151; /* gray-700 */
        }
        /* Custom scrollbar styling for Webkit browsers (light mode) */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px; /* width of the scrollbar */
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1; /* color of the scrollbar track */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #888; /* color of the scrollbar handle */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #555; /* color of the scrollbar handle on hover */
        }
        /* Semester tile base styling */
        .semester-tile {
            @apply flex flex-col items-center justify-center p-4 rounded-xl shadow-md transition-all duration-300 ease-in-out;
            cursor: pointer;
            min-height: 100px; /* Adjusted height for responsiveness */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08); /* Subtle shadow */
            border-radius: 1rem; /* More rounded */
            text-align: center; /* Ensure internal text is centered */
            padding: 1.5rem; /* Increased padding for more space */
        }
        /* Responsive adjustments for semester tiles */
        @media (min-width: 640px) { /* Small screens and up */
            .semester-tile {
                min-height: 120px;
                padding: 1.5rem;
            }
        }
        @media (min-width: 768px) { /* Medium screens and up */
            .semester-tile {
                min-height: 140px;
                padding: 1.75rem;
            }
        }
        @media (min-width: 1024px) { /* Large screens and up */
            .semester-tile {
                min-height: 160px;
                padding: 2rem;
            }
        }
        /* Hover effect for semester tiles */
        .semester-tile:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15), 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        /* Typography within semester tiles */
        .semester-tile .text-3xl {
            font-size: 1.875rem; /* Reverted to original font size for titles */
            line-height: 2.25rem;
        }
        .semester-tile .text-sm {
            font-size: 0.875rem; /* Reverted to original font size for descriptions */
            line-height: 1.25rem;
            opacity: 0.9; /* Make it slightly more visible */
            display: block; /* Ensure it takes its own line */
            margin-top: 0.5rem; /* Explicit margin to separate from title */
        }
        /* Specific colors for each semester tile (light mode) */
        #semester-1-tile {
            background-color: #F97316; /* orange-500 */
            color: white;
        }
        #semester-1-tile.inactive {
            background-color: #FDBA74; /* orange-300 */
            color: #7C2D12; /* orange-900 */
        }
        #semester-2-tile {
            background-color: #3B82F6; /* blue-500 */
            color: white;
        }
        #semester-2-tile.active {
            background-color: #2563EB; /* blue-600 on hover */
        }
        #semester-3-tile {
            background-color: #8B5CF6; /* purple-500 */
            color: white;
        }
        #semester-3-tile.inactive {
            background-color: #C4B5FD; /* purple-300 */
            color: #5B21B6; /* purple-900 */
        }
        #semester-4-tile {
            background-color: #EC4899; /* pink-500 */
            color: white;
        }
        #semester-4-tile.inactive {
            background-color: #FBCFE8; /* pink-300 */
            color: #831843; /* pink-900 */
        }
        /* Styling for the MBA title text shadow (light mode) */
        .h1-text-shadow {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }
        /* Back button styling (light mode) */
        .back-button {
            background-color: transparent;
            color: #475569; /* slate-700 */
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s, transform 0.2s, color 0.2s;
            box-shadow: none;
            font-size: 1.25rem;
            padding: 0.25rem 0.75rem;
            display: inline-flex;
            gap: 0.5rem;
            align-items: center;
        }
        .back-button:hover {
            background-color: #E2E8F0; /* Light background on hover */
            color: #1e293b; /* slate-900 */
            transform: scale(1.02);
        }
        /* Responsive adjustments for the back button */
        @media (max-width: 640px) { /* Small screens */
            .back-button {
                padding: 0.2rem 0.6rem;
                font-size: 1.1rem;
            }
        }

        /* Keyframe animation for floating effect */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Dark mode specific overrides - applied when 'dark' class is on <html> */
        html.dark body {
            background-color: #1a202c; /* slate-900 */
            color: #e2e8f0; /* slate-200 */
        }
        html.dark .bg-slate-50 {
            background-color: #1a202c; /* slate-900 */
        }
        html.dark .text-slate-800 {
            color: #e2e8f0; /* slate-200 */
        }
        html.dark .text-slate-900 {
            color: #f8fafc; /* slate-50 */
        }
        html.dark .text-slate-600 {
            color: #cbd5e0; /* slate-300 */
        }
        html.dark .bg-gradient-to-br {
            background-image: linear-gradient(to bottom right, #1a202c, #2d3748); /* Darker gradient */
        }
        html.dark .from-slate-50 {
            background-color: #1a202c;
        }
        html.dark .to-blue-50 {
            background-color: #2d3748;
        }
        html.dark .bg-blue-100 {
            background-color: #1e3a8a; /* blue-800 */
        }
        html.dark .border-blue-500 {
            border-color: #3b82f6; /* blue-500 */
        }
        html.dark .text-blue-700 {
            color: #93c5fd; /* blue-300 */
        }
        html.dark .shadow-md {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0, 0, 0, 0.2);
        }
        html.dark .text-purple-300 {
            color: #a78bfa; /* purple-400 */
        }
        /* Dark mode active/inactive tab styling */
        html.dark .tab-active {
            background-color: #2563eb; /* blue-600 for dark mode active tab */
            color: white;
        }
        html.dark .tab-inactive {
            background-color: #4a5568; /* slate-700 */
            color: #cbd5e0; /* slate-300 */
        }
        /* Dark mode scrollbar styling */
        html.dark .custom-scrollbar::-webkit-scrollbar-track {
            background: #334155; /* slate-700 */
        }
        html.dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #64748b; /* slate-600 */
        }
        html.dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #475569; /* slate-700 */
        }
        /* Dark mode semester tile hover effect */
        html.dark .semester-tile:hover {
            box-shadow: 0 6px 10px rgba(255, 255, 255, 0.1), 0 2px 5px rgba(255, 255, 255, 0.08);
        }
        /* Dark mode specific colors for inactive semester tiles */
        html.dark #semester-1-tile.inactive {
            background-color: #c2410c; /* dark orange-700 */
            color: #fed7aa; /* orange-200 */
        }
        html.dark #semester-2-tile.active {
            background-color: #1d4ed8; /* blue-700 for dark mode */
        }
        html.dark #semester-3-tile.inactive {
            background-color: #7c3aed; /* dark purple-600 */
            color: #e9d5ff; /* purple-200 */
        }
        html.dark #semester-4-tile.inactive {
            background-color: #be185d; /* dark pink-700 */
            color: #fce7f3; /* pink-200 */
        }
        /* Dark mode MBA title text shadow */
        html.dark .h1-text-shadow {
            text-shadow: 2px 2px 6px rgba(255, 255, 255, 0.1);
        }
        /* Dark mode back button styling */
        html.dark .back-button {
            color: #94a3b8; /* slate-400 */
        }
        html.dark .back-button:hover {
            background-color: #334155; /* slate-700 */
            color: #f1f5f9; /* slate-100 */
        }
        /* Dark mode specific styling for lecture schedule list items */
        html.dark .course-section .bg-slate-50 {
            background-color: #2d3748; /* slate-800 */
        }
        html.dark .course-section .bg-white {
            background-color: #1a202c; /* slate-900 */
        }
        html.dark .course-section .border-slate-200 {
            border-color: #4a5568; /* slate-700 */
        }
        html.dark .course-section .text-slate-700 {
            color: #cbd5e0; /* slate-300 */
        }
        html.dark .course-section .text-blue-600 {
            color: #60a5fa; /* blue-400 */
        }
        html.dark .course-section .bg-blue-50 {
            background-color: #1e3a8a; /* blue-800 */
            color: #bfdbfe; /* blue-200 */
        }
        html.dark .course-section .text-blue-800 {
            color: #bfdbfe; /* blue-200 */
        }
        html.dark .course-section .bg-green-500 {
            background-color: #16a34a; /* green-600 */
        }
        html.dark .course-section .hover:bg-green-600:hover {
            background-color: #15803d; /* green-700 */
        }
        html.dark footer {
            background-color: #2d3748; /* slate-800 */
            color: #cbd5e0; /* slate-300 */
        }
        html.dark .text-slate-500 {
            color: #94a3b8; /* slate-400 */
        }

        /* Modal specific styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }
        html.dark .modal-content {
            background-color: #2d3748; /* Dark mode background */
            color: #e2e8f0; /* Dark mode text */
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .close-button {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
        }
        html.dark .close-button {
            color: #e2e8f0;
        }
        html.dark .close-button:hover,
        html.dark .close-button:focus {
            color: #f8fafc;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 flex flex-col min-h-screen">

    <!-- Theme Toggle Button (placed at the top right of the welcome page) -->
    <button id="theme-toggle" class="fixed top-4 right-4 z-50 p-2 rounded-full bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 shadow-md transition-colors duration-300">
        <!-- Sun icon for light mode, Moon icon for dark mode -->
        <svg id="sun-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.472 7.472a.75.75 0 011.06 0L9.75 8.751A.75.75 0 018.75 9.75l-1.218-1.218a.75.75 0 010-1.06zM4.5 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H5.25A.75.75 0 014.5 12zM7.472 16.528a.75.75 0 010 1.06l-1.218 1.219a.75.75 0 01-1.06-1.06l1.218-1.218a.75.75 0 011.06 0zM12 17.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0v-2.25a.75.75 0 01.75-.75zM16.528 16.528a.75.75 0 011.06 0l1.218 1.219a.75.75 0 01-1.06 1.06l-1.219-1.218a.75.75 0 010-1.06zM19.5 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H20.25a.75.75 0 01-.75-.75zM16.528 7.472a.75.75 0 010-1.06l1.219-1.218a.75.75 0 011.06 1.06l-1.218 1.219a.75.75 0 01-1.06 0zM12 15a3 3 0 100-6 3 3 0 000 6z" />
        </svg>
        <svg id="moon-icon" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display: none;">
            <path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.178 1.054l-1.637 2.127a.75.75 0 01-1.205-.882L8.293 2.15a.75.75 0 011.235-.432zM12 15a3 3 0 100-6 3 3 0 000 6zM21 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5h2.25a.75.75 0 01.75.75zM18.913 18.913a.75.75 0 011.06-1.06l1.219 1.218a.75.75 0 01-1.06 1.06l-1.218-1.219zM12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.472 7.472a.75.75 0 011.06 0L9.75 8.751A.75.75 0 018.75 9.75l-1.218-1.218a.75.75 0 010-1.06zM4.5 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H5.25A.75.75 0 014.5 12zM7.472 16.528a.75.75 0 010 1.06l-1.218 1.219a.75.75 0 01-1.06-1.06l1.218-1.218a.75.75 0 011.06 0zM12 17.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0v-2.25a.75.75 0 01.75-.75zM16.528 16.528a.75.75 0 011.06 0l1.218 1.219a.75.75 0 01-1.06 1.06l-1.219-1.218a.75.75 0 010-1.06zM19.5 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H20.25a.75.75 0 01-.75-.75zM16.528 7.472a.75.75 0 010-1.06l1.219-1.218a.75.75 0 011.06 1.06l-1.218 1.219a.75.75 0 01-1.06 0zM12 15a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
        </svg>
    </button>

    <div id="welcome-page" class="container mx-auto p-4 sm:p-6 md:p-8 flex-grow flex flex-col items-center justify-center text-center bg-gradient-to-br from-slate-50 to-blue-50 relative overflow-hidden">
        <h1 class="text-6xl md:text-8xl font-extrabold text-slate-900 mb-2 tracking-tighter h1-text-shadow">MBA</h1>
        <p class="text-lg text-slate-600 mb-8">Dashboards by Sahansa Jayawardhana</p>
        
        <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mb-8 rounded-lg shadow-md max-w-xl w-full">
            <p class="text-lg font-semibold">Select a Semester to begin your learning journey.</p>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-4xl justify-items-center">
            <div id="semester-1-tile" class="semester-tile inactive" onclick="showComingSoon('Semester 1')">
                <span class="text-3xl font-bold">Semester 1</span>
                <span class="text-sm">Coming Soon!</span>
            </div>
            <div id="semester-2-tile" class="semester-tile active" onclick="showDashboard()">
                <span class="text-3xl font-bold">Semester 2</span>
                <span class="text-sm flex items-center justify-center">Current Academic Semester <span class="ml-2">&#8594;</span></span>
            </div>
            <div id="semester-3-tile" class="semester-tile inactive" onclick="showComingSoon('Semester 3')">
                <span class="text-3xl font-bold">Semester 3</span>
                <span class="text-sm">Coming Soon!</span>
            </div>
            <div id="semester-4-tile" class="semester-tile inactive" onclick="showComingSoon('Semester 4')">
                <span class="text-3xl font-bold">Semester 4</span>
                <span class="text-sm">Coming Soon!</span>
            </div>
        </div>

        <div class="absolute top-1/4 left-[10%] transform -translate-x-1/2 -translate-y-1/2 animate-float hidden md:block opacity-10" style="animation-duration: 4s;">
            <svg class="w-28 h-28 text-blue-300" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 4H7C5.9 4 5 4.9 5 6v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7 20V6h14l.01 14H7z"/>
                <path d="M11 7h2v10h-2V7zM15 7h2v10h-2V7zM7 7h2v10H7z"/>
            </svg>
        </div>

        <div class="absolute bottom-1/4 right-[10%] transform translate-x-1/2 translate-y-1/2 animate-float hidden md:block opacity-10" style="animation-delay: 0.5s; animation-duration: 3.5s;">
            <svg class="w-28 h-28 text-purple-300" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 22H2V2h2v20zM22 10h-2V6h2v4zM18 14h-2V2h2v12zM14 18h-2V6h2v12zM10 22h-2V2h2v20z"/>
            </svg>
        </div>

    </div>

    <div id="dashboard-page" class="container mx-auto p-4 sm:p-6 md:p-8 flex-grow hidden">
        <header class="text-center mb-8 relative">
            <div class="sticky top-0 z-10 bg-slate-50 py-6 shadow-sm relative">
                <div class="flex flex-col items-center">
                    <button onclick="goToWelcomeFromDashboard()" class="back-button mb-2">
                        &#8592; Back
                    </button>
                    <h1 class="text-3xl md:text-4xl font-bold text-slate-900">MBA Semester II Dashboard by Sahansa Jayawardhana</h1>
                </div>
            </div>
            <p class="mt-2 text-lg text-slate-600">I just created this for fun & educational purpose. <br> Happy Learning, Everyone :)</p>
            <p id="current-datetime" class="text-sm text-slate-500 mt-2"></p>
        </header>

        <nav id="course-tabs" class="flex flex-wrap justify-center gap-2 mb-8">
            </nav>

        <main id="course-content">
            </main>
    </div>

    <footer class="mt-auto py-4 text-center text-slate-600 text-sm bg-slate-100">
        <p>To know about the Creator, Visit: <a href="https://www.sahansa.uk/" target="_blank" class="text-blue-600 hover:underline">https://www.sahansa.uk/</a></p>
    </footer>

    <!-- Custom Modal for "Coming Soon" -->
    <div id="coming-soon-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h2 class="text-xl font-bold mb-4">Coming Soon!</h2>
            <p id="modal-message" class="text-lg"></p>
            <button onclick="closeModal()" class="mt-6 px-6 py-2 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 transition-colors duration-200">
                OK
            </button>
        </div>
    </div>

    <script>
        // Define course data for different modules
        const courseData = {
            hr: {
                id: 'hr',
                title: 'Human Resource Management',
                aim: 'To provide students with a theoretical foundation of Human Resource Management and an understanding of its practical applications in the workplace.',
                evaluation: [
                    { label: 'Individual Project', value: 10 },
                    { label: 'Class Activities', value: 20 },
                    { label: 'End Semester Exam', value: 60 },
                ],
                topics: [
                    "Theoretical aspects of HRM and the models of HRM",
                    "Strategic Human Resource Management Roles of HR Managers",
                    "Alignment between HR strategy and business strategy. Value creation and Sustainability",
                    "Job Design, Job Analysis, HR Planning, and their recent trends",
                    "Contemporary HRM Trends and issues with special reference to the current crisis: Group presentations",
                    "Recruitment & Selection and their recent developments",
                    "Alternative resourcing and deployment strategies to meet current business challenges",
                    "Training and Development, Career Management",
                    "Effective questioning techniques for interviews",
                    "Performance Management",
                    "New learning needs and new learning interventions: Social learning and self-learning",
                    "Rewarding strategies",
                    "Employee Movements, Employee Relations, and Discipline Management",
                    "Compensation Management, Leave Management, Salary Administration, and Incentive Management",
                    "Applicability of theories and techniques of positive psychology in addressing contemporary workplace Issues"
                ],
                readings: [
                    "Armstrong, M. & Taylor, S., (2012), Armstrong's Handbook of Human Resource Management Practice, Kogan Page, London."
                ],
                files: [
                    { name: "HR Module Files", url: "https://drive.google.com/file/d/1egsTxCkBz70cLx5X54uyTgrqVPJT9YGX/view?usp=drive_link" }
                ]
            },
            op: {
                id: 'op',
                title: 'Operations Management',
                aim: "To provide students with comprehensive knowledge and skills needed to ensure the ongoing contribution of a firm's operations to its competitive position, highlighting the complex processes underlying the development and manufacture of products as well as the creation and delivery of services.",
                evaluation: [
                    { label: 'Assignments', value: 20 },
                    { label: 'Presentation', value: 10 },
                    { label: 'Class tests/quizzes', value: 10 },
                    { label: 'End Semester Exam', value: 60 },
                ],
                topics: [
                    "Overview of Operations Management",
                    "Competitiveness, Operations Strategy & Productivity",
                    "Capacity Planning for Product and Service",
                    "Product and Service Design",
                    "Work Design & Measurement",
                    "Process Analysis & Layout Design",
                    "Location Planning & Geographic Information System (GIS)",
                    "Quality Management: Concepts and tools",
                    "Inventory Management",
                    "Enterprise Resource Planning (ERP) & Material Resource Planning (MRP)",
                    "Supply Chain Management and Block Chain Techniques",
                    "Lean Manufacturing/Operations",
                    "Smart Manufacturing/Services (Industry 4.0)",
                    "AI and Operations Scheduling",
                    "Sustainable Manufacturing/Operations Practices"
                ],
                readings: [
                    "Case, R.B., Jacab F.R Aquilano, N.J and Agarwal N.K., (2015) Operations Management for Comparative Advantages, Tata McGraw-Hill, New Delhi.",
                    "Greasley, A., (2023) Operations Management, John Wiley & Sons, USA (3rd Edition)",
                    "Heizer, J. and Render, B., (2018) Principles of Operations Management, Pearson, Prentice Hall Inc, USA(9th Edition).",
                    "Russel. R.S and Taylor B.W., (2003) Operations Management, Pearson Education",
                    "William J. S., (2021) Operations Management, McGraw Hill/Irwin Series (14th Edition)",
                    "In addition, jounal articles/book chapters will be provided/uploaded before the lectures"
                ],
                files: [
                    { name: "Operations Module File 1", url: "https://drive.google.com/file/d/10eQCNnIKYJx6_euEfOKi9BzJcU51U2Uz/view?usp=drive_link" },
                    { name: "Operations Module File 2", url: "https://drive.google.com/file/d/15xurqKCGm7G75KdOqU-jfpGUMnyyNJ0C/view?usp=drive_link" },
                    { name: "Operations Module File 3", url: "https://drive.google.com/file/d/1JYlLcA4uhvE6b86RIPgmJRQ2Wmrlb1UY/view?usp=sharing" }
                ]
            },
            research: {
                id: 'research',
                title: 'Research Project',
                aim: 'To provide students with knowledge on undertaking a research project following necessary steps and developing a project report based on the knowledge gained.',
                evaluation: [
                    { label: 'Proposal Presentation', value: 10 },
                    { label: 'Research Proposal', value: 20 },
                    { label: 'Final Presentation', value: 20 },
                    { label: 'Final Report', value: 50 },
                ],
                topics: [
                    "Introduction to Research Methods, Development of the Proposal, and the Final Report",
                    "Problem, Questions, Objectives and Scope and Significance for a Research Report",
                    "Literature Review and Research Framework for a Report",
                    "Research Methodology",
                    "Preparation of Proposal and Preparation for Presentation",
                    "Research Proposal Presentation",
                    "Research Proposal Submission",
                    "Data Collection",
                    "Data Analysis & Presentation, Discussion and Recommendation End of Lectures",
                    "Data Analysis & Presentation",
                    "Writing the Discussion",
                    "Writing the Recommendations",
                    "Preparation of Presentation",
                    "Final Presentation",
                    "Report Submission"
                ],
                readings: [
                    "Saunders, M.N.K., Lewis, P. and Thornhill, A. (2020) Research Methods for Business Students, Nils Eid, Pearson Education, India",
                    "Sekaran, U., & Bougic, R (2016) Research methods for business. A skill-building approach (7th ed), John Wiley & Sons Ltd., West Sussex,"
                ],
                files: [
                    { name: "Research Project File 1", url: "https://drive.google.com/file/d/1zBQHbB_d_LXrtukzi2vkey42lNVzMTEe/view?usp=drive_link" },
                    { name: "Research Project File 2", url: "https://drive.google.com/file/d/1qQ3AfjULLJCMcX64vH6_oA-qe3hCoWjh/view?usp=drive_link" }
                ]
            },
            ob: {
                id: 'ob',
                title: 'Organizational Behaviour',
                aim: 'To provide students with knowledge on how individual, group and system-level dimensions influence the effective functioning of organizations. Particularly, the focus is on understanding how individuals and groups act within organizations and devising mechanisms to influence the above levels to achieve effectiveness.',
                evaluation: [
                    { label: 'Class Test', value: 10 }, 
                    { label: 'Individual Assignment', value: 10 },
                    { label: 'Group Project', value: 13 },
                    { label: 'End Semester Exam', value: 67 }
                ],
                topics: [
                    "Introduction to Organizational Behaviour: Model, concepts, and application",
                    "Diversity, Equity and Inclusion in Organizations",
                    "Perception",
                    "Personality",
                    "Learning",
                    "Emotions and Emotional Intelligence",
                    "Values and Attitudes",
                    "Psychological Contract",
                    "Motivating People Theory and Application",
                    "Groups and Teams at Workplace",
                    "Decision-Making and Performance Management",
                    "Conflict & Negotiation",
                    "Organizational Culture",
                    "Organizational Change Management",
                    "Power & Organizational Politics"
                ],
                readings: [
                    "Robbins, S. P. & Judge, T.A., (2018), Organizational Behavior, 18 ed., Prentice Hall, New York.",
                    "Luthans, F., (2015), Organizational Behavior: An Evidence-based Approach, 13 th ed., Prentice Hall, New York",
                    "Kreitner, R. & Kinicki, A., (2012), Organizational Behavior, 10 th ed., McGraw-Hill, New York",
                    "McShane, S. &Von Glinow, M., (2017), Organizational Behaviour, 8 th ed., McGraw-Hill, New York.",
                    "Opatha, H.D.N.P. (2015), Organizational Behaviour. The Human Side of Work, Colombo."
                ],
                files: [
                    { name: "OB Module File 1", url: "https://drive.google.com/file/d/1K4GJZsWpb9ZTCnOHXK7Katrmwy95JBE4/view?usp=drive_link" },
                    { name: "OB Module File 2", url: "https://drive.google.com/file/d/16PJMP5FoBwZQt51qx-7Cf9yxgEosk3jD/view?usp=drive_link" },
                    { name: "OB Module File 3", url: "https://drive.google.com/file/d/1a_d5i2YR8QfpMxGiIBVOsUN2Y_ZjLKBU/view?usp=drive_link" }
                ]
            },
            marketing: {
                id: 'marketing',
                title: 'Marketing Management',
                aim: 'To provide students with knowledge on the nature and scope of marketing management by incorporating both the local and global environmental dynamics and develop marketing strategies to achieve organizational objectives and create value for multiple stakeholders.',
                evaluation: [
                    { label: 'Individual Assignment', value: 10 },
                    { label: 'Case Studies', value: 15 },
                    { label: 'Group Presentation', value: 15 },
                    { label: 'Final Examination', value: 60 },
                ],
                topics: [
                    "Introduction to marketing management",
                    "Analyzing the marketing environment",
                    "Marketing information system and conducting a marketing research",
                    "Consumer market, consumer buying behavior and customer relationship management",
                    "Business market and industrial buying behavior",
                    "Addressing competition and driving growth",
                    "Market segmentation, targeting and positioning",
                    "Developing product strategy",
                    "Corporate image and brand management",
                    "Developing and managing pricing strategies and marketing channels",
                    "Designing and managing integrated marketing communications",
                    "Designing and managing services",
                    "International marketing strategy",
                    "New dimensions in Marketing",
                    "Strategic marketing and drafting the marketing plan"
                ],
                files: [
                    { name: "Marketing Module File 1", url: "https://drive.google.com/file/d/1egsTxCkBz70cLx5X54uyTgrqVPJT9YGX/view?usp=drive_link" },
                    { name: "Marketing Module File 2", url: "https://drive.google.com/file/d/1X-N4aLSQ8Xx1FJB3eMesW-nSQutKDOS7/view?usp=drive_link" }
                ]
            }
        };

        const chartInstances = {}; // Object to store Chart.js instances

        /**
         * Creates and renders the course tabs based on the courseData.
         * Clears existing tabs before rendering.
         */
        function createTabs() {
            const tabsContainer = document.getElementById('course-tabs');
            tabsContainer.innerHTML = ''; // Clear existing tabs
            Object.values(courseData).forEach(course => {
                const tab = document.createElement('button');
                tab.textContent = course.title;
                tab.dataset.courseId = course.id;
                // Apply Tailwind classes for styling, including theme-aware colors
                tab.className = `tab-button px-4 py-2 rounded-lg font-semibold transition-colors duration-300 tab-inactive`;
                tab.onclick = () => showCourse(course.id);
                tabsContainer.appendChild(tab);
            });
        }

        /**
         * Creates and renders the content sections for each course.
         * Clears existing content sections before rendering.
         */
        function createContentSections() {
            const contentContainer = document.getElementById('course-content');
            contentContainer.innerHTML = ''; // Clear existing content sections
            Object.values(courseData).forEach(course => {
                const section = document.createElement('div');
                section.id = `content-${course.id}`;
                // Apply Tailwind classes for styling, including theme-aware colors
                section.className = 'course-section hidden bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg dark:shadow-xl';
                
                section.innerHTML = `
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <div class="lg:col-span-1">
                            <h2 class="text-2xl font-bold text-slate-900 dark:text-slate-50 mb-4">${course.title}</h2>
                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-2">Course Aim</h3>
                            <p class="text-slate-600 dark:text-slate-400 mb-6">${course.aim}</p>
                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-4 text-center">Evaluation Breakdown</h3>
                            <div class="chart-container">
                                <canvas id="chart-${course.id}"></canvas>
                            </div>
                        </div>
                        <div class="lg:col-span-1 flex flex-col">
                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-4">Weekly Lecture Schedule <br> (1-15 Weeks)</h3>
                            <button onclick="scrollToWeek15('${course.id}')" class="mb-4 px-4 py-2 bg-blue-100 text-blue-700 dark:bg-blue-800 dark:text-blue-200 rounded-lg font-semibold hover:bg-blue-200 dark:hover:bg-blue-700 transition-colors duration-200 self-center">
                                Jump to Week 15
                            </button>
                            <div class="max-h-[300px] overflow-y-auto pr-2 space-y-3 mb-6 custom-scrollbar flex-grow">
                                ${course.topics.map((topic, index) => `
                                    <div id="week-${index + 1}-topic-${course.id}" class="flex items-start p-3 rounded-lg ${index % 2 === 0 ? 'bg-slate-50 dark:bg-slate-800' : 'bg-white dark:bg-gray-900'} border border-slate-200 dark:border-slate-700 ${index === 14 ? 'bg-blue-50 text-blue-800 dark:bg-blue-800 dark:text-blue-200 font-bold' : ''}">
                                        <div class="flex-shrink-0 bg-blue-500 text-white rounded-full h-8 w-8 flex items-center justify-center font-bold mr-4">${index + 1}</div>
                                        <p class="text-slate-700 dark:text-slate-300 self-center">${topic}</p>
                                    </div>
                                `).join('')}
                            </div>
                            
                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-4 mt-4">Recommended Readings</h3>
                            <div class="max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar flex-grow">
                                ${course.readings && course.readings.length > 0 ? 
                                    course.readings.map((reading, index) => `
                                        <p class="text-slate-600 dark:text-slate-400 ${index % 2 === 0 ? 'bg-slate-50 dark:bg-slate-800' : 'bg-white dark:bg-gray-900'} p-2 rounded-lg border border-slate-200 dark:border-slate-700">
                                            <a href="https://www.google.com/search?q=${encodeURIComponent(reading)}" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">${reading}</a>
                                        </p>
                                    `).join('') : '<p class="text-slate-600 dark:text-slate-400 p-2">N/A</p>'}
                            </div>

                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-4 mt-4">Access Recommended Readings Drive Files</h3>
                            <p class="text-xs text-slate-500 dark:text-slate-400 mb-2">Dinesh Ayiya's Support in finding the resource books should be highlighted here.</p>
                            <div class="max-h-[150px] overflow-y-auto pr-2 space-y-2 custom-scrollbar flex-grow">
                                ${course.files && course.files.length > 0 ? 
                                    course.files.map((file, index) => `
                                        <p class="text-slate-600 dark:text-slate-400 ${index % 2 === 0 ? 'bg-slate-50 dark:bg-slate-800' : 'bg-white dark:bg-gray-900'} p-2 rounded-lg border border-slate-200 dark:border-slate-700">
                                            <a href="${file.url}" target="_blank" class="text-blue-600 dark:text-blue-400 hover:underline">📁 ${file.name}</a>
                                        </p>
                                    `).join('') : '<p class="text-slate-600 dark:text-slate-400 p-2">No module files available.</p>'}
                            </div>

                            <h3 class="text-lg font-semibold text-slate-700 dark:text-slate-300 mb-2 mt-6">Add Your Findings Here</h3>
                            <p class="text-sm text-slate-600 dark:text-slate-400 mb-4">Click & visit the drive folder and you can upload your resources.</p>
                            <a href="https://drive.google.com/drive/folders/19Ba2q4EyBIgOYnxLlOy_iSpr6l8bWMD9?usp=drive_link" target="_blank" class="inline-block px-4 py-2 bg-green-500 text-white rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200 shadow-md self-start dark:bg-green-600 dark:hover:bg-green-700">
                                Open Findings Drive Folder ↗
                            </a>
                        </div>
                    </div>
                `;
                contentContainer.appendChild(section);
            });
        }
        
        /**
         * Updates the doughnut chart for a given course.
         * Destroys existing chart instance before creating a new one.
         * @param {string} courseId - The ID of the course.
         */
        function updateChart(courseId) {
            const course = courseData[courseId];
            const ctx = document.getElementById(`chart-${courseId}`).getContext('2d');
            
            if (chartInstances[courseId]) {
                chartInstances[courseId].destroy(); // Destroy existing chart instance if it exists
            }

            // Determine chart colors based on current theme
            const isDarkMode = document.documentElement.classList.contains('dark');
            const backgroundColors = isDarkMode ? [
                '#60a5fa', /* blue-400 */
                '#93c5fd', /* blue-300 */
                '#bfdbfe', /* blue-200 */
                '#dbeafe', /* blue-100 */
                '#eff6ff', /* blue-50 */
            ] : [
                '#3b82f6', /* blue-500 */
                '#60a5fa', /* blue-400 */
                '#93c5fd', /* blue-300 */
                '#bfdbfe', /* blue-200 */
                '#dbeafe', /* blue-100 */
            ];
            const borderColor = isDarkMode ? '#1a202c' : '#ffffff'; // Border color for dark/light mode
            const textColor = isDarkMode ? '#e2e8f0' : '#475569'; // Text color for dark/light mode

            chartInstances[courseId] = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: course.evaluation.map(item => item.label),
                    datasets: [{
                        label: 'Evaluation %',
                        data: course.evaluation.map(item => item.value),
                        backgroundColor: backgroundColors,
                        borderColor: borderColor,
                        borderWidth: 3,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    size: 14,
                                },
                                color: textColor // Apply dynamic text color to legend labels
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += context.parsed + '%';
                                    }
                                    return label;
                                }
                            },
                            bodyFont: { size: 14 },
                            titleFont: { size: 16 }
                        }
                    },
                    cutout: '60%'
                }
            });
        }

        /**
         * Updates the UI based on the current application state.
         * @param {object} state - The current state object (e.g., { page: 'welcome' } or { page: 'dashboard', courseId: 'hr' }).
         */
        function renderPage(state) {
            if (!state || state.page === 'welcome') {
                document.getElementById('welcome-page').classList.remove('hidden');
                document.getElementById('dashboard-page').classList.add('hidden');
            } else if (state.page === 'dashboard') {
                document.getElementById('welcome-page').classList.add('hidden');
                document.getElementById('dashboard-page').classList.remove('hidden');
                createTabs(); // Ensure tabs are created
                createContentSections(); // Ensure content sections are created
                showCourse(state.courseId || 'hr', false); // Render specific course, don't push new history state
            }
        }

        // Event listener for browser's back/forward buttons
        window.onpopstate = function(event) {
            renderPage(event.state);
        };

        /**
         * Navigates to the welcome page from the dashboard.
         * Updates browser history.
         */
        function goToWelcomeFromDashboard() {
            history.pushState({ page: 'welcome' }, '', '#welcome');
            renderPage({ page: 'welcome' });
        }

        /**
         * Shows the welcome page.
         * @param {boolean} pushHistory - Whether to push a new state to history (default: true).
         */
        function showWelcomePage(pushHistory = true) {
            if (pushHistory && history.state?.page !== 'welcome') {
                history.pushState({ page: 'welcome' }, '', '#welcome');
            }
            renderPage({ page: 'welcome' });
        }

        /**
         * Shows the dashboard page, defaulting to 'hr' course.
         * Updates browser history.
         */
        function showDashboard() {
            history.pushState({ page: 'dashboard', courseId: 'hr' }, '', '#dashboard/hr');
            renderPage({ page: 'dashboard', courseId: 'hr' });
        }

        /**
         * Displays the content for a specific course on the dashboard.
         * @param {string} courseId - The ID of the course to display.
         * @param {boolean} pushHistory - Whether to push a new state to history (default: true).
         */
        function showCourse(courseId, pushHistory = true) {
            // Hide all course sections
            document.querySelectorAll('.course-section').forEach(section => {
                section.classList.add('hidden');
            });
            // Show the selected course section
            document.getElementById(`content-${courseId}`).classList.remove('hidden');

            // Update active/inactive tab styles
            document.querySelectorAll('.tab-button').forEach(button => {
                if (button.dataset.courseId === courseId) {
                    button.classList.remove('tab-inactive');
                    button.classList.add('tab-active');
                } else {
                    button.classList.remove('tab-active');
                    button.classList.add('tab-inactive');
                }
            });

            updateChart(courseId); // Update the chart for the selected course

            // Push history state if explicitly requested (e.g., when clicking tabs)
            if (pushHistory) {
                history.pushState({ page: 'dashboard', courseId: courseId }, '', `#dashboard/${courseId}`);
            }
        }

        /**
         * Displays a custom modal with a "Coming Soon" message.
         * @param {string} semesterName - The name of the semester.
         */
        function showComingSoon(semesterName) {
            document.getElementById('modal-message').textContent = `${semesterName} content is coming soon!`;
            document.getElementById('coming-soon-modal').classList.remove('hidden');
        }

        /**
         * Closes the custom modal.
         */
        function closeModal() {
            document.getElementById('coming-soon-modal').classList.add('hidden');
        }

        /**
         * Scrolls to the Week 15 topic within the lecture schedule.
         * @param {string} courseId - The ID of the current course.
         */
        function scrollToWeek15(courseId) {
            const week15Element = document.getElementById(`week-15-topic-${courseId}`);
            if (week15Element) {
                const scrollContainer = week15Element.closest('.custom-scrollbar');
                if (scrollContainer) {
                    const offset = week15Element.offsetTop - scrollContainer.offsetTop;
                    scrollContainer.scrollTo({
                        top: offset,
                        behavior: 'smooth'
                    });
                }
            }
        }

        /**
         * Updates the current date and time displayed in the header.
         */
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true };
            document.getElementById('current-datetime').textContent = now.toLocaleDateString('en-US', options);
        }

        // --- Dark Mode Logic ---
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');

        /**
         * Toggles the dark mode on or off.
         */
        function toggleTheme() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
            updateThemeIcons();
            // Re-render charts to update their colors
            const currentPage = history.state;
            if (currentPage && currentPage.page === 'dashboard' && currentPage.courseId) {
                updateChart(currentPage.courseId);
            }
        }

        /**
         * Updates the visibility of the sun/moon icons based on the current theme.
         */
        function updateThemeIcons() {
            if (document.documentElement.classList.contains('dark')) {
                sunIcon.style.display = 'block';
                moonIcon.style.display = 'none';
            } else {
                sunIcon.style.display = 'none';
                moonIcon.style.display = 'block';
            }
        }

        /**
         * Applies the stored theme preference on page load.
         */
        function applyStoredTheme() {
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme === 'dark' || (!storedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            updateThemeIcons();
        }

        // Initial load logic: determine state from URL hash or default, and replace history
        window.onload = () => {
            applyStoredTheme(); // Apply theme before rendering content
            themeToggle.addEventListener('click', toggleTheme); // Attach event listener to theme toggle button

            const path = window.location.hash.substring(1); // Get path after #
            if (path.startsWith('dashboard/')) {
                const courseId = path.split('/')[1] || 'hr';
                history.replaceState({ page: 'dashboard', courseId: courseId }, '', `#dashboard/${courseId}`);
                renderPage({ page: 'dashboard', courseId: courseId });
            } else {
                history.replaceState({ page: 'welcome' }, '', '#welcome');
                renderPage({ page: 'welcome' });
            }
            updateDateTime();
            setInterval(updateDateTime, 1000); // Update date and time every second
        };

        // Close modal when clicking outside of it
        window.addEventListener('click', (event) => {
            const modal = document.getElementById('coming-soon-modal');
            if (event.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>
